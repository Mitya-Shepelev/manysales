# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –î–µ–ø–ª–æ–π ManySales —Å Redis –≤ Dokploy

## ‚ö° –ß—Ç–æ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

### ‚úÖ Dockerfile
- PHP 8.3 —Å FPM
- **Redis —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ** (`pecl install redis`)
- PostgreSQL, GD, Imagick
- Nginx + Supervisor
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è production

### ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å Redis
- **CatalogCacheService** - –∫–µ—à –∫–∞—Ç–∞–ª–æ–≥–∞ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±—Ä–µ–Ω–¥—ã, —Ñ–∏–ª—å—Ç—Ä—ã)
- **VendorCacheService** - –∫–µ—à –ø–∞–Ω–µ–ª–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç–æ–ø —Ç–æ–≤–∞—Ä—ã)
- **ApiCacheMiddleware** - –∞–≤—Ç–æ–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API (5-60 –º–∏–Ω—É—Ç)
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞** - –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π/—Ç–æ–≤–∞—Ä–æ–≤

### ‚úÖ Entrypoint —Å–∫—Ä–∏–ø—Ç
- –û–∂–∏–¥–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ PostgreSQL
- **–û–∂–∏–¥–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Redis**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –¥–µ–ø–ª–æ—è

### 1Ô∏è‚É£ –í Dokploy –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–æ:
- [ ] PostgreSQL –±–∞–∑–∞: `postgreszakaz-rqk84o`
- [ ] Redis —Å–µ—Ä–≤–µ—Ä: `redis-8ugjdw` (Internal Host –∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞)

### 2Ô∏è‚É£ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Dokploy

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ **Environment Variables** –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```env
# ===== –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï =====
APP_NAME=ManySales
APP_ENV=production
APP_DEBUG=false
APP_KEY=base64:9u2FLzN8Evlg47CKbL9M5ALst2CsIl7fymttM/7yxhw=
APP_URL=https://your-domain.com

# Database
DB_CONNECTION=pgsql
DB_HOST=postgreszakaz-rqk84o
DB_PORT=5432
DB_DATABASE=manysales
DB_USERNAME=user
DB_PASSWORD=tovar-zakaz-app2025@

# ===== REDIS (–ö–†–ò–¢–ò–ß–ù–û!) =====
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_DRIVER=redis
REDIS_HOST=redis-8ugjdw
REDIS_PASSWORD=DiMa198704@
REDIS_PORT=6379
REDIS_CLIENT=phpredis

# –ú–∏–≥—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è!)
MIGRATE_ON_START=true
```

> **–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è –∏–∑–º–µ–Ω–∏—Ç–µ `MIGRATE_ON_START=false`

### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è

1. –°–æ–∑–¥–∞–π—Ç–µ Application –∏–∑ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∏ SSL
4. –ù–∞–∂–º–∏—Ç–µ **Deploy**
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (5-10 –º–∏–Ω—É—Ç)

### 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```bash
# –í Dokploy Terminal:
cd /var/www/html

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Redis
php -m | grep redis
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: redis

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
php artisan tinker
>>> Cache::get('test')
>>> Cache::put('test', 'Hello Redis', 60)
>>> Cache::get('test')
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: Hello Redis

# –ü—Ä–æ–≥—Ä–µ—Ç—å –∫–µ—à
php artisan cache:clear-app --type=catalog --warmup
```

## üéØ –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** 300ms ‚Üí 100ms (‚Üì3x)
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:** 400ms ‚Üí 100ms (‚Üì4x)
- **API:** 300ms ‚Üí 80ms (‚Üì4x)
- **–ü–∞–Ω–µ–ª—å –ø—Ä–æ–¥–∞–≤—Ü–∞:** 700ms ‚Üí 150ms (‚Üì5x)

### –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î:
- **‚Üì 60-80%** –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ PostgreSQL
- **100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –±–µ–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `DOKPLOY_DEPLOY.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- `REDIS_OPTIMIZATION.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `.env.dokploy` - –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üÜò –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç?**
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Dokploy, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL –∏ Redis –∑–∞–ø—É—â–µ–Ω—ã

**Redis –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è?**
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `REDIS_HOST` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Internal Host –∏–∑ Dokploy Redis

**–°–µ—Å—Å–∏–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è?**
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å: `SESSION_DRIVER=redis` –∏ `REDIS_PASSWORD` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

**–ù—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à?**
‚Üí `php artisan cache:clear-app --type=all`

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Redis –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ! üéâ
